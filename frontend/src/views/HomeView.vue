<script setup>
import { ref, onMounted } from 'vue'
import axios from 'axios'
import BookCard from '@/components/BookCard.vue'

const popularBooks = ref([])
const loading = ref(true)

onMounted(async () => {
  try {
    const response = await axios.get('http://localhost:8000/books/popular/')
    popularBooks.value = response.data
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∫–Ω–∏–≥:', error)
  } finally {
    loading.value = false
  }
})
</script>

<template>
  <main>
    <!-- Hero —Å–µ–∫—Ü–∏—è -->
    <section class="hero">
      <div class="container">
        <div class="hero-content">
          <h1 class="font-special">–û—Ç–∫—Ä–æ–π—Ç–µ –¥–ª—è —Å–µ–±—è –º–∏—Ä –∫–Ω–∏–≥</h1>
          <p class="hero-subtitle">–°–æ–∑–¥–∞–≤–∞–π—Ç–µ —Å–≤–æ–π —Å–ø–∏—Å–æ–∫ –¥–ª—è —á—Ç–µ–Ω–∏—è, –¥–µ–ª–∏—Ç–µ—Å—å –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏—è–º–∏ –∏ –Ω–∞—Ö–æ–¥–∏—Ç–µ –Ω–æ–≤—ã–µ –∫–Ω–∏–≥–∏</p>
          <router-link to="/books" class="cta-button">–ù–∞—á–∞—Ç—å —á–∏—Ç–∞—Ç—å</router-link>
        </div>
      </div>
    </section>

    <!-- –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–Ω–∏–≥–∏ -->
    <section class="popular-books">
      <div class="container">
        <h2 class="section-title font-special">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–Ω–∏–≥–∏</h2>
        <div class="books-grid" v-if="!loading">
          <BookCard
            v-for="book in popularBooks"
            :key="book.id"
            :book="book"
          />
        </div>
        <div v-else class="loading">
          –ó–∞–≥—Ä—É–∑–∫–∞ –∫–Ω–∏–≥...
        </div>
      </div>
    </section>

    <!-- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ -->
    <section class="features">
      <div class="container">
        <h2 class="section-title font-special">–ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞—Å</h2>
        <div class="features-grid">
          <div class="feature-card">
            <div class="feature-icon">üìö</div>
            <h3>–ë–æ–ª—å—à–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞</h3>
            <p>–¢—ã—Å—è—á–∏ –∫–Ω–∏–≥ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∂–∞–Ω—Ä–æ–≤</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üìù</div>
            <h3>–õ–∏—á–Ω—ã–µ —Å–ø–∏—Å–∫–∏</h3>
            <p>–°–æ–∑–¥–∞–≤–∞–π—Ç–µ –∏ —É–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–≤–æ–∏–º–∏ —Å–ø–∏—Å–∫–∞–º–∏ –¥–ª—è —á—Ç–µ–Ω–∏—è</p>
          </div>
          <div class="feature-card">
            <div class="feature-icon">üí¨</div>
            <h3>–û–±—Å—É–∂–¥–µ–Ω–∏—è</h3>
            <p>–î–µ–ª–∏—Ç–µ—Å—å –º–Ω–µ–Ω–∏–µ–º –∏ –æ–±—â–∞–π—Ç–µ—Å—å —Å –¥—Ä—É–≥–∏–º–∏ —á–∏—Ç–∞—Ç–µ–ª—è–º–∏</p>
          </div>
        </div>
      </div>
    </section>

    <!-- –û—Ç–∑—ã–≤—ã -->
    <section class="testimonials">
      <div class="container">
        <h2 class="section-title font-special">–û—Ç–∑—ã–≤—ã —á–∏—Ç–∞—Ç–µ–ª–µ–π</h2>
        <div class="testimonials-grid">
          <div class="testimonial-card">
            <p class="testimonial-text">"–û—Ç–ª–∏—á–Ω—ã–π —Å–µ—Ä–≤–∏—Å! –ù–∞—à–µ–ª –º–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –∫–Ω–∏–≥ –∏ –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª—Å—è —Å –µ–¥–∏–Ω–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞–º–∏."</p>
            <div class="testimonial-author">–ê–Ω–Ω–∞ –ö.</div>
          </div>
          <div class="testimonial-card">
            <p class="testimonial-text">"–£–¥–æ–±–Ω–æ –≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –∫–Ω–∏–≥ –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ."</p>
            <div class="testimonial-author">–ú–∏—Ö–∞–∏–ª –ü.</div>
          </div>
          <div class="testimonial-card">
            <p class="testimonial-text">"–õ—é–±–ª—é –æ–±—â–∞—Ç—å—Å—è —Å –¥—Ä—É–≥–∏–º–∏ —á–∏—Ç–∞—Ç–µ–ª—è–º–∏ –∏ —É–∑–Ω–∞–≤–∞—Ç—å –æ –Ω–æ–≤—ã—Ö –∫–Ω–∏–≥–∞—Ö."</p>
            <div class="testimonial-author">–ï–ª–µ–Ω–∞ –°.</div>
          </div>
        </div>
      </div>
    </section>
  </main>
</template>

<style scoped>
.hero {
  background: linear-gradient(135deg, var(--dark-color) 0%, var(--pale-color) 100%);
  color: white;
  padding: 120px 0;
  text-align: center;
}

.hero-content {
  max-width: 800px;
  margin: 0 auto;
}

.hero h1 {
  font-size: 48px;
  margin-bottom: 24px;
}

.hero-subtitle {
  font-size: 20px;
  margin-bottom: 32px;
  opacity: 0.9;
}

.cta-button {
  display: inline-block;
  background: white;
  color: var(--dark-color);
  padding: 16px 32px;
  border-radius: 12px;
  font-size: 18px;
  font-weight: 600;
  transition: transform 0.3s ease;
}

.cta-button:hover {
  transform: translateY(-2px);
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.section-title {
  font-size: 32px;
  text-align: center;
  margin-bottom: 48px;
}

.popular-books {
  padding: 80px 0;
  background: #f8f9fa;
}

.books-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 24px;
}

.features {
  padding: 80px 0;
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 32px;
}

.feature-card {
  text-align: center;
  padding: 32px;
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.feature-icon {
  font-size: 48px;
  margin-bottom: 16px;
}

.feature-card h3 {
  font-size: 20px;
  margin-bottom: 12px;
}

.testimonials {
  padding: 80px 0;
  background: #f8f9fa;
}

.testimonials-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 32px;
}

.testimonial-card {
  background: white;
  padding: 32px;
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.testimonial-text {
  font-size: 16px;
  line-height: 1.6;
  margin-bottom: 16px;
}

.testimonial-author {
  font-weight: 600;
  color: var(--pale-color);
}

.loading {
  text-align: center;
  padding: 40px;
  font-size: 18px;
  color: var(--pale-color);
}

@media (max-width: 768px) {
  .hero h1 {
    font-size: 36px;
  }
  
  .hero-subtitle {
    font-size: 18px;
  }
  
  .section-title {
    font-size: 28px;
  }
}
</style>